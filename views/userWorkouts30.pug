extends layout

block vars
    - var milesRun = miles
    - var heartRate = heart
    - var duration = time
    - var caloriesBurned = calories
    - var totalMiles = 0;
    - var avgMiles = 0;
    - var totalHeartRate = 0;
    - var avgHeartRate = 0;
    - var totalDuration = 0;
    - var avgDuration = 0;
    - var totalCalsBurned = 0;
    - var avgCalsBurned = 0;
    - var numDays = num
    - var dataPoints = [1, 2, 3 , 4, 5, 6 , 7, 8, 9 ,10, 11, 12, 13, 14 ,15, 16 ,17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29 ,30];

block scripts
    script(src="https://cdn.plot.ly/plotly-latest.min.js")
block content
    center
        h1 Total Statistics for the Past 30 Workouts



        each val in milesRun
            script.
                #{totalMiles= totalMiles + val}

        h3 Total Miles Run: #{totalMiles}

        script.
            #{avgMiles= totalMiles}
            #{avgMiles = totalMiles / numDays}
            #{avgMiles = Math.round(avgMiles)}


        h3 Miles Run per Workout: #{avgMiles}


        div(id="milesRun")
        script.
            var trace1 = {
                x: [#{dataPoints}],
                y: [#{milesRun}],
                mode: 'line'
            };

            var data = [trace1];

            var layout = {
                title:'Miles Run',
                xaxis: {
                    title: 'Workout',
                    showgrid: true,
                    zeroline: false,
                    showline: true
                },
                yaxis: {
                    title: 'Miles Run',
                    showline: true
                }
            };

            Plotly.newPlot('milesRun', data, layout);

        each val in heartRate
            script.
                #{totalHeartRate= totalHeartRate + val}

        script.
            #{avgHeartRate= totalHeartRate}
            #{avgHeartRate = totalHeartRate / numDays}
            #{avgHeartRate = Math.round(avgHeartRate)}

        h3 Average Heart Rate: #{avgHeartRate}


        div(id="heartRate")
        script.
            var trace2 = {
                x: [#{dataPoints}],
                y: [#{heartRate}],
                mode: 'line'
            };

            var data = [trace2];

            var layout = {
                title:'Heart Rate',
                xaxis: {
                    title: 'Workout',
                    showgrid: true,
                    zeroline: false,
                    showline: true
                },
                yaxis: {
                    title: 'Heart Rate (BPM)',
                    showline: true
                }
            };

            Plotly.newPlot('heartRate', data, layout);


        each val in duration
            script.
                #{totalDuration= totalDuration + val}

        script.
            #{avgDuration = totalDuration}
            #{avgDuration = totalDuration / numDays}
            #{avgDuration = Math.round(avgDuration)}

        h3 Total Workout Duration: #{totalDuration} minutes
        h3 Average Workout Duration: #{avgDuration} minutes


        div(id="duration")
        script.
            var trace3 = {
                x: [#{dataPoints}],
                y: [#{duration}],
                mode: 'line'
            };

            var data = [trace3];

            var layout = {
                title:'Duration',
                xaxis: {
                    title: 'Day',
                    showgrid: true,
                    zeroline: false,
                    showline: true,
                },
                yaxis: {
                    title: 'Duration (Minutes)',
                    showline: true
                }
            };

            Plotly.newPlot('duration', data, layout);

        each val in caloriesBurned
            script.
                #{totalCalsBurned= totalCalsBurned + val}

        script.
            #{avgCalsBurned = totalCalsBurned}
            #{avgCalsBurned = totalCalsBurned / numDays}
            #{avgCalsBurned = Math.round(avgCalsBurned)}

        h3 Total Calories Burned: #{totalCalsBurned}
        h3 Average Calories Burned: #{avgCalsBurned}



        div(id="caloriesBurned")
        script.
            var trace3 = {
                x: [#{dataPoints}],
                y: [#{caloriesBurned}],
                mode: 'line'
            };

            var data = [trace3];

            var layout = {
                title:'Calories Burned',
                xaxis: {
                    title: 'Workout',
                    showgrid: true,
                    zeroline: false,
                    showline: true
                },
                yaxis: {
                    title: 'Calories Burned',
                    showline: true
                }
            };

            Plotly.newPlot('caloriesBurned', data, layout);
